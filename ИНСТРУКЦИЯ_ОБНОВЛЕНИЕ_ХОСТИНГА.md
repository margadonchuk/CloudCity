# Инструкция по обновлению товаров хостинга

## Что было сделано

1. ✅ Создан SQL-скрипт `update_hosting_products.sql` для обновления товаров хостинга
2. ✅ Обновлен `HostingController.cs` для отображения 6 параметров вместо 3
3. ✅ Добавлена поддержка параметров: **CPU**, **RAM**, **SSD (NVMe)**, **OS**, **Bandwidth**, **Гео**

## Как использовать SQL-скрипт

### Для SQL Server:

```bash
# Подключитесь к SQL Server и выполните скрипт
sqlcmd -S 10.151.10.8 -d CloudCityDB -U ваш_логин -P ваш_пароль -i update_hosting_products.sql
```

Или через SQL Server Management Studio:
1. Откройте `update_hosting_products.sql`
2. Подключитесь к базе данных `CloudCityDB`
3. Выполните скрипт (F5)

### Для SQLite:

```bash
# Если используете SQLite
sqlite3 your_database.db < update_hosting_products.sql
```

## Что делает скрипт

### 1. Обновляет "Basic Hosting"
- Удаляет старые фичи: Storage, Bandwidth, Email Accounts
- Добавляет новые фичи:
  - **CPU**: 1 Core
  - **RAM**: 1 GB
  - **SSD (NVMe)**: 10 GB
  - **OS**: Linux
  - **Bandwidth**: 100 GB
  - **Гео**: Netherlands
- Обновляет Location товаров хостинга на "Нидерланды"

### 2. Добавляет новые товары хостинга (опционально)
- **Premium Hosting** ($25/мес):
  - CPU: 2 Cores
  - RAM: 2 GB
  - SSD (NVMe): 50 GB
  - OS: Linux
  - Bandwidth: 500 GB
  - Гео: Netherlands

- **Business Hosting** ($50/мес):
  - CPU: 4 Cores
  - RAM: 4 GB
  - SSD (NVMe): 100 GB
  - OS: Linux / Windows
  - Bandwidth: 1 TB
  - Гео: Netherlands

### 3. Добавляет варианты оплаты
- Создает ProductVariants для всех товаров хостинга

## Проверка результатов

После выполнения скрипта проверьте результаты:

```sql
-- Проверить все товары хостинга
SELECT Id, Name, Slug, PricePerMonth 
FROM Products 
WHERE Type = 1;

-- Проверить фичи для Basic Hosting
SELECT pf.Name, pf.Value 
FROM ProductFeatures pf
INNER JOIN Products p ON pf.ProductId = p.Id
WHERE p.Slug = 'basic-hosting' AND p.Type = 1
ORDER BY 
    CASE pf.Name
        WHEN 'CPU' THEN 1
        WHEN 'RAM' THEN 2
        WHEN 'SSD (NVMe)' THEN 3
        WHEN 'OS' THEN 4
        WHEN 'Bandwidth' THEN 5
        WHEN 'Гео' THEN 6
        ELSE 99
    END;
```

## Изменения в коде

### HostingController.cs
- Теперь показывает **6 фичей** вместо 3
- Фичи отображаются в правильном порядке: CPU → RAM → SSD (NVMe) → OS → Bandwidth → Гео
- Если какой-то параметр отсутствует, он пропускается

## Важные замечания

1. **Скрипт безопасен**: использует `NOT EXISTS` для предотвращения дублирования
2. **Идемпотентность**: скрипт можно запускать несколько раз без ошибок
3. **Совместимость**: работает как с SQL Server, так и с SQLite
4. **Порядок фичей**: фичи всегда отображаются в указанном порядке на странице

## После выполнения скрипта

1. Перезапустите приложение (если нужно)
2. Откройте страницу `/Hosting` в браузере
3. Проверьте, что параметры отображаются корректно

## Настройка значений параметров

Если нужно изменить значения параметров для "Basic Hosting", отредактируйте соответствующие строки в скрипте:

```sql
-- Например, изменить CPU на 2 Cores:
INSERT INTO ProductFeatures (ProductId, Name, Value)
SELECT 
    Id AS ProductId,
    'CPU' AS Name,
    '2 Cores' AS Value  -- Измените здесь
FROM Products 
WHERE Slug = 'basic-hosting' AND Type = 1
...
```

Или выполните UPDATE:

```sql
UPDATE ProductFeatures
SET Value = '2 Cores'
WHERE ProductId = (SELECT Id FROM Products WHERE Slug = 'basic-hosting')
AND Name = 'CPU';
```

