# ✅ SSL работает! Проверка приложения

## Отлично!

SSL соединение с `smtp.hostinger.com:465` **работает** через openssl:
- ✅ TLSv1.3 соединение установлено
- ✅ Сертификат проверен
- ✅ Сервер отвечает: `220 ESMTP smtp.hostinger.com`

## Теперь проверьте приложение

### 1. Убедитесь, что порт 465 в переменных окружения:

```bash
sudo systemctl show cloudcity | grep SmtpPort
```

Должно быть: `Email__SmtpPort=465`

Если нет или другой порт:
```bash
sudo systemctl edit cloudcity --full
```

Измените на:
```ini
Environment=Email__SmtpPort=465
Environment=Email__UseSsl=true
```

### 2. Перезапустите сервис:

```bash
sudo systemctl daemon-reload
sudo systemctl restart cloudcity
```

### 3. Проверьте логи:

```bash
sudo journalctl -u cloudcity -f
```

Отправьте форму и смотрите. Должно быть:

```
Email configuration: Host=smtp.hostinger.com, Port=465, Username=support@cloudcity.center, SSL=True, PasswordSet=True
Connecting to SMTP server: smtp.hostinger.com:465
Using SSL on connect (port 465)
Attempting to connect to smtp.hostinger.com:465 with SSL option: SslOnConnect...
SMTP connection established. IsConnected: True, IsAuthenticated: False
SMTP server capabilities: ...
Authenticating as support@cloudcity.center...
SMTP authentication successful. IsAuthenticated: True
Sending email to support@cloudcity.center...
Email sent successfully
```

### 4. Если все еще таймаут:

Временно отключите проверку сертификата для диагностики:

```bash
sudo systemctl edit cloudcity --full
```

Добавьте:
```ini
Environment=Email__CheckCertificate=false
```

Затем:
```bash
sudo systemctl daemon-reload
sudo systemctl restart cloudcity
```

⚠️ **ВНИМАНИЕ:** Только для диагностики! После выяснения проблемы верните `true`.

### 5. Проверьте пароль:

Убедитесь, что пароль правильный:
- Попробуйте войти в почтовый ящик через веб-интерфейс Hostinger
- Проверьте, что пароль в файле конфигурации точно такой же

---

**SSL работает, значит проблема в настройках приложения! Проверьте порт и пароль.**

