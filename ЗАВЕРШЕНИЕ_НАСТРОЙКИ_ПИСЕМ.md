# ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∏—Å–µ–º

## –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `ContactMessages` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞:
- ‚úÖ Id: INT IDENTITY (–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á)
- ‚úÖ –í—Å–µ –∫–æ–ª–æ–Ω–∫–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã (NVARCHAR, DATETIME2, BIT)
- ‚úÖ –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —Å–æ–∑–¥–∞–Ω

## –®–∞–≥ 1: –ü–æ–º–µ—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫–∞–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—É—é

–ß—Ç–æ–±—ã Entity Framework –Ω–µ –ø—ã—Ç–∞–ª–∞—Å—å –ø—Ä–∏–º–µ–Ω—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å–Ω–æ–≤–∞, –¥–æ–±–∞–≤—å—Ç–µ –µ—ë –≤ –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π:

```sql
USE CloudCityDB;
GO

-- –ù–∞–π–¥–∏—Ç–µ –∏–º—è –≤–∞—à–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏–∑ –ø–∞–ø–∫–∏ Migrations/)
-- –ù–∞–ø—Ä–∏–º–µ—Ä: 20250106191202_AddContactMessagesOnly
-- –ò –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

INSERT INTO [dbo].[__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES ('20250106191202_AddContactMessagesOnly', '8.0.6');
GO
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `20250106191202_AddContactMessagesOnly` –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è –≤–∞—à–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏!

–ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∏–º—è –º–∏–≥—Ä–∞—Ü–∏–∏:
1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ø–∞–ø–∫–µ `Migrations/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SSMS:
   ```sql
   SELECT * FROM [dbo].[__EFMigrationsHistory] 
   ORDER BY [MigrationId] DESC;
   ```

## –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å

```bash
sudo systemctl restart cloudcity
```

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/Admin/Messages` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
   - –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è, –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ "–ü–∏—Å–µ–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Ñ–æ—Ä–º—É:
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/Contact` –∏–ª–∏ `/About`
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Å—å–º–æ:
   - –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ `/Admin/Messages`
   - –ü–∏—Å—å–º–æ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ
   - –û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π

## –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
sudo journalctl -u cloudcity -n 50 --no-pager
```

–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å:
- `ContactMessages`
- `ApplicationDbContext`
- `MessagesController`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ SQL

–ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–∏—Å—å–º–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:

```sql
USE CloudCityDB;
GO

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∏—Å–µ–º
SELECT COUNT(*) AS TotalMessages FROM [dbo].[ContactMessages];
GO

-- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–∏—Å–µ–º
SELECT TOP 10 
    Id, 
    Name, 
    Email, 
    SourcePage, 
    CreatedAt, 
    IsRead 
FROM [dbo].[ContactMessages] 
ORDER BY CreatedAt DESC;
GO
```

---

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –≤—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å! üéâ**

