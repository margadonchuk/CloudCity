# üéØ –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ë–ï–ó dotnet ef

–ü–æ—Å–∫–æ–ª—å–∫—É `dotnet ef` –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–π SQL —Å–∫—Ä–∏–ø—Ç.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (2 —à–∞–≥–∞)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –û—Ç–∫—Ä–æ–π—Ç–µ **SQL Server Management Studio**
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É `10.151.10.8`
3. –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `CloudCityDB` (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –µ—ë, –µ—Å–ª–∏ –Ω–µ—Ç)
4. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `create_database_sqlserver.sql`
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç (F5)

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–ª—è SQL Server.

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `migrate_products_to_sql.sql` (—É–∂–µ —Å–æ–∑–¥–∞–Ω —Ä–∞–Ω–µ–µ) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥.

–ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
cd /home/siteadmin/cloudcity/CloudCityCenter
export ASPNETCORE_ENVIRONMENT=Production
export ConnectionStrings__DefaultConnection="Server=10.151.10.8;Database=CloudCityDB;User Id=sa;Password=–í–ê–®_–ü–ê–†–û–õ–¨;TrustServerCertificate=True;MultipleActiveResultSets=true"

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ (—Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã, –º–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞)
dotnet run -- --migrate-data
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ SQL Server:

```sql
USE CloudCityDB;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
SELECT TABLE_NAME 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_TYPE = 'BASE TABLE'
ORDER BY TABLE_NAME;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
SELECT COUNT(*) as ProductsCount FROM Products;  -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 16
SELECT COUNT(*) as VariantsCount FROM ProductVariants;  -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 16
SELECT COUNT(*) as FeaturesCount FROM ProductFeatures;  -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å ~80-100

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–æ–Ω–∫–∏ Slug
SELECT COLUMN_NAME, DATA_TYPE 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_NAME = 'Products' AND COLUMN_NAME = 'Slug';
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `dotnet ef`** - –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–¥—Ö–æ–¥–µ
- **–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É** —á–µ—Ä–µ–∑ SQL —Å–∫—Ä–∏–ø—Ç
- **–ó–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ** —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ SQL —Å–∫—Ä–∏–ø—Ç

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç `dotnet ef`
2. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å SQL Server
3. ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
4. ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ SSMS


