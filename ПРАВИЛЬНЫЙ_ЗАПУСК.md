# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ **Development** –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç **5076** –≤–º–µ—Å—Ç–æ **5000**.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status cloudcity

# –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, —Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ:
sudo nano /etc/systemd/system/cloudcity.service
```

–í—Å—Ç–∞–≤—å—Ç–µ:
```ini
[Unit]
Description=CloudCity ASP.NET Core App
After=network.target

[Service]
Type=notify
WorkingDirectory=/home/siteadmin/cloudcity/CloudCityCenter
ExecStart=/usr/bin/dotnet /home/siteadmin/cloudcity/CloudCityCenter/bin/Release/net8.0/CloudCityCenter.dll
Restart=always
RestartSec=10
KillSignal=SIGINT
SyslogIdentifier=cloudcity
Environment=ASPNETCORE_ENVIRONMENT=Production
Environment=ASPNETCORE_URLS=http://localhost:5000
Environment=USE_REVERSE_PROXY=true
User=siteadmin

[Install]
WantedBy=multi-user.target
```

–ó–∞—Ç–µ–º:
```bash
sudo systemctl daemon-reload
sudo systemctl enable cloudcity
sudo systemctl restart cloudcity
sudo systemctl status cloudcity
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-launch-profile` —á—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è Development –ø—Ä–æ—Ñ–∏–ª—å!

```bash
cd /home/siteadmin/cloudcity/CloudCityCenter

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export ASPNETCORE_ENVIRONMENT=Production
export ASPNETCORE_URLS="http://localhost:5000"
export USE_REVERSE_PROXY=true

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ù–ï dotnet run!)
dotnet bin/Release/net8.0/CloudCityCenter.dll
```

–ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `dotnet run`:
```bash
dotnet run --configuration Release --no-launch-profile
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ

```bash
cd /home/siteadmin/cloudcity/CloudCityCenter

export ASPNETCORE_ENVIRONMENT=Production
export ASPNETCORE_URLS="http://localhost:5000"
export USE_REVERSE_PROXY=true

nohup dotnet bin/Release/net8.0/CloudCityCenter.dll > app.log 2>&1 &
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
netstat -tlnp | grep 5000
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: tcp 0 0 127.0.0.1:5000

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: Hosting environment: Production (–ù–ï Development!)

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç
curl http://localhost:5000
```

## ‚ùå –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `dotnet run` –±–µ–∑ `--no-launch-profile`
- ‚ùå –ù–ï –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `ASPNETCORE_ENVIRONMENT=Production`
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Ä—Ç 5076 (—ç—Ç–æ Development –ø–æ—Ä—Ç)

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5000
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Production  ‚Üê –í–ê–ñ–ù–û!
info: Microsoft.Hosting.Lifetime[0]
      Content root path: /home/siteadmin/cloudcity/CloudCityCenter
```







