# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ñ–æ—Ä–º—ã

## –ü—Ä–æ–±–ª–µ–º–∞

–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (GET `/Contact`), –Ω–æ –Ω–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã (POST `/Contact/Submit`).

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:
- POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/Contact/Submit`
- –û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- JavaScript –æ—à–∏–±–∫–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- –ü—Ä–æ–±–ª–µ–º–∞ —Å AntiForgeryToken

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u cloudcity -f

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ, —á—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
```

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏:
```
Contact form Submit called. Name: ..., Email: ...
Contact form submitted from ... - email sending in background
Email configuration: Host=smtp.hostinger.com, Port=465...
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
2. –ù–∞–∂–º–∏—Ç–µ F12 (–æ—Ç–∫—Ä—ã—Ç—å DevTools)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Console"
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ JavaScript

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –≤–∫–ª–∞–¥–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Network"
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É
4. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/Contact/Submit`
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 302 Redirect)
   - Request payload (–¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã)
   - Response (—Ä–µ–¥–∏—Ä–µ–∫—Ç)

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:
- –ò–º—è (Name) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- Email - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- –¢–µ–ª–µ—Ñ–æ–Ω (Phone) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- –°–æ–æ–±—â–µ–Ω–∏–µ (Message) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ AntiForgeryToken

–ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑-–∑–∞ AntiForgeryToken:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `@Html.AntiForgeryToken()` –µ—Å—Ç—å –≤ —Ñ–æ—Ä–º–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å cookies

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É –∏ —Å—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   sudo journalctl -u cloudcity -n 50 | grep -i "contact\|submit\|email"
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏**

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –≤–∫–ª–∞–¥–∫—É - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ POST –∑–∞–ø—Ä–æ—Å**

4. **–ï—Å–ª–∏ POST –∑–∞–ø—Ä–æ—Å –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JavaScript –æ—à–∏–±–∫–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º—ã
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—É –±–µ–∑ JavaScript (–æ—Ç–∫–ª—é—á–∏—Ç–µ JS –≤—Ä–µ–º–µ–Ω–Ω–æ)

5. **–ï—Å–ª–∏ POST –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –Ω–µ—Ç –ª–æ–≥–æ–≤:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å

## –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ

```
Contact form Submit called. Name: –ò–≤–∞–Ω, Email: test@example.com, Phone: +1234567890, Message length: 50
Contact form submitted from –ò–≤–∞–Ω (test@example.com) - email sending in background
Email configuration: Host=smtp.hostinger.com, Port=465, Username=support@cloudcity.center, SSL=True, PasswordSet=True
Attempting to connect to smtp.hostinger.com:465...
SMTP connection established. IsConnected: True, IsAuthenticated: False
Authenticating as support@cloudcity.center...
SMTP authentication successful. IsAuthenticated: True
Sending email to support@cloudcity.center with subject: ...
Email sent successfully to support@cloudcity.center
Contact form email sent successfully from –ò–≤–∞–Ω (test@example.com)
```

## –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. –í—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π endpoint:
   ```csharp
   [HttpPost]
   public IActionResult TestSubmit()
   {
       _logger.LogInformation("TestSubmit called!");
       return Ok("Form received");
   }
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   cd /home/siteadmin/cloudcity/CloudCityCenter/CloudCity
   git pull
   dotnet build --configuration Release
   sudo systemctl restart cloudcity
   ```

---

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - —Ç–∞–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å "Contact form Submit called".

