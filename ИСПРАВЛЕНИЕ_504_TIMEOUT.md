# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 504 Gateway Time-out

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ **504 Gateway Time-out**. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ SMTP –∑–∞–Ω–∏–º–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∏ nginx –Ω–µ –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∫–∞ email –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ —Ñ–æ–Ω–µ** (fire-and-forget). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –§–æ—Ä–º–∞ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –æ—Ç–≤–µ—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç —Ç–∞–π–º–∞—É—Ç

### 2. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤ nginx (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx:

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nano /etc/nginx/sites-available/cloudcitylife.com
```

–î–æ–±–∞–≤—å—Ç–µ –≤ —Å–µ–∫—Ü–∏—é `location /`:

```nginx
location / {
    proxy_pass http://localhost:5000;
    proxy_http_version 1.1;
    
    # –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã
    proxy_connect_timeout 60s;
    proxy_send_timeout 60s;
    proxy_read_timeout 60s;
    send_timeout 60s;
    
    # –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-Host $server_name;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection keep-alive;
    proxy_cache_bypass $http_upgrade;
}
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª `nginx-timeout-fix.conf` –∫–∞–∫ –ø—Ä–∏–º–µ—Ä.

### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ï—Å–ª–∏ –≤—Å–µ –û–ö, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ nginx
sudo systemctl reload nginx
```

### 4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /home/siteadmin/cloudcity/CloudCityCenter/CloudCity
git pull
dotnet build --configuration Release
sudo systemctl restart cloudcity
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º—É** ‚Üí –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π (–±—ã—Å—Ç—Ä–æ)
3. **–ó–∞–ø—É—Å–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ email –≤ —Ñ–æ–Ω–µ** ‚Üí –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
4. **–°—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
5. **Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ** ‚Üí –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –∑–∞–π–º–µ—Ç –≤—Ä–µ–º—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –ø–æ–ª—É—á–∏–ª –æ—Ç–≤–µ—Ç

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ù–µ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç  
‚úÖ **–õ—É—á—à–∏–π UX** - –Ω–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ email  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –¥–∞–∂–µ –µ—Å–ª–∏ email –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Å—Ä–∞–∑—É, —Ñ–æ—Ä–º–∞ –ø—Ä–∏–Ω—è—Ç–∞  
‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏  

## –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **Contact** –∏–ª–∏ **About**
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É
4. –î–æ–ª–∂–Ω–æ —Å—Ä–∞–∑—É –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   sudo journalctl -u cloudcity -f
   ```
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ –æ—Ç–ø—Ä–∞–≤–∫—É email –≤ —Ñ–æ–Ω–µ

## –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   ```bash
   sudo journalctl -u cloudcity -n 100
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ nginx:**
   ```bash
   sudo tail -f /var/log/nginx/error.log
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω:**
   ```bash
   git log -1 --oneline
   ```

4. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:**
   ```bash
   sudo systemctl status cloudcity
   ```

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —Ñ–æ—Ä–º—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Ç–∞–π–º–∞—É—Ç–æ–≤! üéâ

